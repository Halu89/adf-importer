modules:
  jira:issueActivity:
    - key: adf-importer-hello-world-issue-activity
      resource: main
      resolver:
        function: resolver
      render: native
      title: adf-importer

  function:
    - key: resolver
      handler: index.handler

    - key: handleCommentAdded
      handler: index.handleEvent

    - key: handleAttachmentAdded
      handler: index.handleEvent

  trigger:
    - key: issue-comment-added
      function: handleCommentAdded
      events:
        - avi:jira:commented:issue
      filter:
        ignoreSelf: true
        onError: RECEIVE_AND_LOG

    - key: issue-attachment-added
      function: handleAttachmentAdded
      events:
        - avi:jira:created:attachment
      filter:
        ignoreSelf: true
        onError: RECEIVE_AND_LOG

permissions:
  scopes:
    - "read:jira-work"

resources:
  - key: main
    path: src/frontend/index.jsx

app:
  # Preview Multi-app support
  runtime:
    name: nodejs22.x
    memoryMB: 256
    architecture: arm64
  id: ari:cloud:ecosystem::app/c2decf0d-0aa0-4ac9-bc64-4e3fb6d21205
  compatibility:
    confluence:
      required: false
    jira:
      required: true

