modules:
  jira:issueActivity:
    - key: adf-importer-hello-world-issue-activity
      resource: main
      resolver:
        function: resolver
      render: native
      title: adf-importer

  function:
    - key: resolver
      handler: index.handler

    - key: handleAttachmentAdded
      handler: index.handleAttachmentAdded

  trigger:
    - key: issue-attachment-added
      function: handleAttachmentAdded
      events:
        - avi:jira:created:attachment
      filter:
        ignoreSelf: true
        onError: RECEIVE_AND_LOG

permissions:
  scopes:
    - "read:jira-work" # Read events and attachments from Jira issues
    - "write:jira-work" # Create comments on Jira issues
    - "write:page:confluence" # Create pages in Confluence

resources:
  - key: main
    path: src/frontend/index.jsx

app:
  # Preview Multi-app support
  runtime:
    name: nodejs22.x
    memoryMB: 256
    architecture: arm64
  id: ari:cloud:ecosystem::app/c2decf0d-0aa0-4ac9-bc64-4e3fb6d21205
  compatibility:
    confluence:
      required: false
    jira:
      required: true

